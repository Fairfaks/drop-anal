# PBN Domain Analyzer

Автоматизированный инструмент для массового анализа expired / dropped доменов и оценки их под PBN (Private Blog Network).

---

## Описание скрипта

1. **WHOIS-проверка**  
   — собирает дату регистрации, возраст домена, дату окончания регистрации и регистратор.

2. **Backorder.ru API**  
   — по каждому домену подтягивает:
   - цену (`price`)  
   - возраст (`old`, в годах)  
   - количество ссылок (`links`)  
   - флаги «РКН-блок» и «судебный домен»

3. **Wayback Machine**  
   — анализирует историю:
   - общее число снимков  
   - первая и последняя дата съёмки  
   - выбор репрезентативных снимков  
   - для каждого снимка:
     - извлекает HTML и чистый текст  
     - считает длину текста, внутренние/внешние ссылки  
     - детектирует CMS (WordPress, Joomla, Drupal, Bitrix, Tilda и др.)  
     - определяет язык и нишевую тематику  
     - ищет спам-ключевые фразы (из `spam_words.txt`)

4. **DNS-проверка**  
   — проверяет наличие A- и MX-записей, фиксирует DNS-ошибки.

5. **Спам-детектор**  
   — на основе внешнего списка фраз (`spam_words.txt`) собирает единый regex и в тексте каждого снимка находит совпадения, возвращая:
   - флаг `is_spam`  
   - список найденных ключевых фраз

6. **PBN Score**  
   — сводит все метрики в одну итоговую оценку (0–100), выдаёт рекомендации.

7. **Экспорт результатов**  
   — сохраняет:
   - `pbn_analysis.xlsx` (листы: Сводка, Детальный анализ, История контента, …)  
   - `domains_for_ahrefs.txt` (топ-кандидаты для прогонки в Ahrefs)  
   - `domains_monitoring.json` (список для дальнейшего мониторинга)

---

## Входные данные

1. **Список доменов**  
   Файл `outgoing_domains1.txt`:  
   - По одному домену в строке, без `http://` и `www.`  
   ```text
   example1.ru
   dropped-domain.org
   another-domain.com

2. **Список спам-слов**
Файл `spam_words.txt`:

   По одной фразе или слову на строку

   Комментарии (строки, начинающиеся с #) игнорируются

   Пример:

    ```text
    # Азартные игры
    casino
    казино
    онлайн казино
    
    # Тематика для взрослых
    секс
    porn

## Установка зависимостей
Скрипт рассчитан на Python 3.8+.

1. **Создайте и активируйте виртуальное окружение:**
     ```text
    python3 -m venv venv
    # Linux/macOS
    source venv/bin/activate
    # Windows
    venv\Scripts\activate.bat
2. **Установите необходимые пакеты:**
    ```text
    pip install --upgrade pip
    pip install aiohttp pandas beautifulsoup4 lxml python-whois dnspython numpy openpyxl

3. **(Опционально) Зафиксируйте версии в requirements.txt:**
    ```text
    pip freeze > requirements.txt
